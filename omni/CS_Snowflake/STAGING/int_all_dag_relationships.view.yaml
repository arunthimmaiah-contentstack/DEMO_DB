# Reference this view as staging__int_all_dag_relationships
schema: STAGING
table_name: INT_ALL_DAG_RELATIONSHIPS

dimensions:
  parent_id:
    sql: '"PARENT_ID"'
    format: ID

  parent:
    sql: '"PARENT"'

  parent_resource_type:
    sql: '"PARENT_RESOURCE_TYPE"'

  parent_model_type:
    sql: '"PARENT_MODEL_TYPE"'

  parent_materialized:
    sql: '"PARENT_MATERIALIZED"'

  parent_access:
    sql: '"PARENT_ACCESS"'

  parent_is_public:
    sql: '"PARENT_IS_PUBLIC"'

  parent_source_name:
    sql: '"PARENT_SOURCE_NAME"'

  parent_file_path:
    sql: '"PARENT_FILE_PATH"'

  parent_directory_path:
    sql: '"PARENT_DIRECTORY_PATH"'

  parent_file_name:
    sql: '"PARENT_FILE_NAME"'

  parent_is_excluded:
    sql: '"PARENT_IS_EXCLUDED"'

  child_id:
    sql: '"CHILD_ID"'
    format: ID

  child:
    sql: '"CHILD"'

  child_resource_type:
    sql: '"CHILD_RESOURCE_TYPE"'

  child_model_type:
    sql: '"CHILD_MODEL_TYPE"'

  child_materialized:
    sql: '"CHILD_MATERIALIZED"'

  child_access:
    sql: '"CHILD_ACCESS"'

  child_is_public:
    sql: '"CHILD_IS_PUBLIC"'

  child_source_name:
    sql: '"CHILD_SOURCE_NAME"'

  child_file_path:
    sql: '"CHILD_FILE_PATH"'

  child_directory_path:
    sql: '"CHILD_DIRECTORY_PATH"'

  child_file_name:
    sql: '"CHILD_FILE_NAME"'

  child_is_excluded:
    sql: '"CHILD_IS_EXCLUDED"'

  distance:
    sql: '"DISTANCE"'

  path:
    sql: '"PATH"'

  is_dependent_on_chain_of_views:
    sql: '"IS_DEPENDENT_ON_CHAIN_OF_VIEWS"'

measures:
  count:
    aggregate_type: count

#The info below was pulled from your dbt repository and is read-only.
dbt:
  name: int_all_dag_relationships
  target_schema: STAGING
  config:
    materialized: view
  code: |-
    -- creates a cte called all_relationships that will either use "with recursive" or loops depending on the DW
    {{ dbt_project_evaluator.recursive_dag() }}

    select * from all_relationships
    order by parent, distance
  referenced_by:
    [
      fct_root_models,
      fct_model_fanout,
      fct_source_fanout,
      fct_too_many_joins,
      fct_unused_sources,
      fct_model_directories,
      fct_direct_join_to_source,
      fct_multiple_sources_joined,
      fct_chained_views_dependencies,
      fct_staging_dependent_on_staging,
      fct_rejoining_of_upstream_concepts,
      fct_exposure_parents_materializations,
      fct_exposures_dependent_on_private_models,
      fct_marts_or_intermediate_dependent_on_source,
      fct_staging_dependent_on_marts_or_intermediate
    ]
