# Reference this view as omni_dbt_staging__stg_salesforce__opportunity_contactrole
schema_label: ""
#This description was pulled from dbt.
description: |
  Staging model for Salesforce Opportunity Contact Roles. This model extracts and renames fields from the Salesforce 'opportunity_contact_role' source table,  filtering out deleted records.  It provides a clean mapping of contact roles associated with opportunities,  including primary status.

schema: omni_dbt_staging
table_name: STG_SALESFORCE__OPPORTUNITY_CONTACTROLE

dimensions:
  contactrole_id:
    sql: '"CONTACTROLE_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Primary key for the opportunity contact role record.

  opportunity_id:
    sql: '"OPPORTUNITY_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Foreign key referencing the related opportunity.

  contact_id:
    sql: '"CONTACT_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Foreign key referencing the related contact.

  role:
    sql: '"ROLE"'
    #This description was pulled from dbt.
    description: Role of the contact in relation to the opportunity.

  is_primary:
    sql: '"IS_PRIMARY"'
    #This description was pulled from dbt.
    description: Boolean indicating if the contact is the primary contact for the
      opportunity.

measures:
  count:
    aggregate_type: count

#The info below was pulled from your dbt repository and is read-only.
dbt:
  name: stg_salesforce__opportunity_contactrole
  target_schema: STAGING
  description: |
    Staging model for Salesforce Opportunity Contact Roles. This model extracts and renames fields from the Salesforce 'opportunity_contact_role' source table,  filtering out deleted records.  It provides a clean mapping of contact roles associated with opportunities,  including primary status.
  config:
    schema: staging
    materialized: view
  code: |-
    with source as (
        select * from {{ source('salesforce_opportunity', 'opportunity_contact_role') }}
        where is_deleted = false
    ),

    renamed as (
        select
            id as contactrole_id,
            opportunity_id as opportunity_id,
            contact_id as contact_id,
            role,
            is_Primary
        from source
    )

    select * from renamed
  referenced_by: [ int_marketing__opportunity_contacts, int_salesforce__opportunity_unified ]
