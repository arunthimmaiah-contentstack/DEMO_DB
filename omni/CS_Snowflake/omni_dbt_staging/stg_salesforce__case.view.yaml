# Reference this view as omni_dbt_staging__stg_salesforce__case
schema_label: ""
#This description was pulled from dbt.
description: |
  Staging model for core Salesforce Case attributes. Includes key identifiers, status, escalation, origin, and important timestamps. Only non-deleted cases are included.

schema: omni_dbt_staging
table_name: STG_SALESFORCE__CASE

dimensions:
  case_id:
    sql: '"CASE_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Primary key. Salesforce Case ID.

  fivetran_case_id:
    sql: '"FIVETRAN_CASE_ID"'
    format: ID

  account_id:
    sql: '"ACCOUNT_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Salesforce Account ID associated with the case.

  contact_id:
    sql: '"CONTACT_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Salesforce Contact ID associated with the case.

  owner_id:
    sql: '"OWNER_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Salesforce User ID of the case owner.

  org_id:
    sql: '"ORG_ID"'
    format: ID
    #This description was pulled from dbt.
    description: Contentstack Organization ID (custom field).

  is_deleted:
    sql: '"IS_DELETED"'
    #This description was pulled from dbt.
    description: Indicates if the case is deleted.

  is_escalated:
    sql: '"IS_ESCALATED"'
    #This description was pulled from dbt.
    description: Indicates if the case is currently escalated.

  last_escalated_c:
    sql: '"LAST_ESCALATED_C"'

  status:
    sql: '"STATUS"'
    #This description was pulled from dbt.
    description: Current status of the case (e.g., New, In Progress, Closed).

  origin:
    sql: '"ORIGIN"'
    #This description was pulled from dbt.
    description: Origin of the case (e.g., Web, Phone, Email).

  priority:
    sql: '"PRIORITY"'

  categories_c:
    sql: '"CATEGORIES_C"'
    #This description was pulled from dbt.
    description: Categories assigned to the case (custom field).

  is_closed:
    sql: '"IS_CLOSED"'
    #This description was pulled from dbt.
    description: Indicates if the case is closed.

  microservices_c:
    sql: '"MICROSERVICES_C"'

  sub_microservices_c:
    sql: '"SUB_MICROSERVICES_C"'

  created_at:
    sql: '"CREATED_AT"'
    #This description was pulled from dbt.
    description: Timestamp when the case was created.

  closed_at:
    sql: '"CLOSED_AT"'
    #This description was pulled from dbt.
    description: Timestamp when the case was closed.

  last_modified_at:
    sql: '"LAST_MODIFIED_AT"'
    #This description was pulled from dbt.
    description: Timestamp when the case was last modified.

measures:
  count:
    aggregate_type: count

#The info below was pulled from your dbt repository and is read-only.
dbt:
  name: stg_salesforce__case
  target_schema: STAGING
  description: |
    Staging model for core Salesforce Case attributes. Includes key identifiers, status, escalation, origin, and important timestamps. Only non-deleted cases are included.
  config:
    schema: staging
    materialized: view
  code: |-
    with source as (
        select * from {{ source('salesforce_case', 'case') }}
    ),

    renamed as (
        select
            case_number as case_id,
            id as fivetran_case_id,
            account_id,
            contact_id,
            owner_id,
            contentstack_organization_c as org_id,
            is_deleted,
            is_escalated,
            last_escalated_c, 
            status,
            origin,
            priority,
            categories_c,
            is_closed,
            microservices_c,
            sub_microservices_c,
            cast(created_date as timestamp_tz) as created_at,
            cast(closed_date as timestamp_tz) as closed_at,
            cast(last_modified_date as timestamp_tz) as last_modified_at

        from source
        where is_deleted = false
    )

    select * from renamed
  referenced_by: [ fct_cases ]
