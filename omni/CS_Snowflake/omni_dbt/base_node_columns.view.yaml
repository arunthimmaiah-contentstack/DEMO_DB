# Reference this view as omni_dbt__base_node_columns
schema_label: ""

schema: omni_dbt
table_name: BASE_NODE_COLUMNS

dimensions:
  node_unique_id:
    sql: '"NODE_UNIQUE_ID"'
    format: ID

  name:
    sql: '"NAME"'

  description:
    sql: '"DESCRIPTION"'

  data_type:
    sql: '"DATA_TYPE"'

  constraints:
    sql: '"CONSTRAINTS"'

  has_not_null_constraint:
    sql: '"HAS_NOT_NULL_CONSTRAINT"'

  constraints_count:
    sql: '"CONSTRAINTS_COUNT"'

  quote:
    sql: '"QUOTE"'

measures:
  count:
    aggregate_type: count

#The info below was pulled from your dbt repository and is read-only.
dbt:
  name: base_node_columns
  target_schema: STAGING
  config:
    materialized: table
  code: |-
    {{
        config(
            materialized='table',
            post_hook="{{ insert_resources_from_graph(this, resource_type='nodes', columns=True) }}"
        )
    }}

    {% if execute %}
        {{ check_model_is_table(model) }}
    {% endif %}
    /* Bigquery won't let us `where` without `from` so we use this workaround */
    with dummy_cte as (
        select 1 as foo
    ) 

    select 
        cast(null as {{ dbt_project_evaluator.type_string_dpe() }}) as node_unique_id,
        cast(null as {{ dbt_project_evaluator.type_string_dpe()}}) as name,
        cast(null as {{ dbt_project_evaluator.type_large_string()}}) as description,
        cast(null as {{ dbt_project_evaluator.type_string_dpe()}}) as data_type,
        cast(null as {{ dbt_project_evaluator.type_string_dpe()}}) as constraints,
        cast(True as {{ dbt.type_boolean() }}) as has_not_null_constraint,
        cast(0 as {{ dbt.type_int() }}) as constraints_count,
        cast(null as {{ dbt_project_evaluator.type_string_dpe()}}) as quote

    from dummy_cte
    where false
  referenced_by: [ stg_columns, int_model_test_summary ]
